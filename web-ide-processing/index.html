<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Processing Web IDE</title>
  <link rel="stylesheet" href="style.css">
  <!-- CodeMirror styles via CDN -->
  <link rel="stylesheet" href="external/codemirror.min.css">
  <link rel="stylesheet" href="external/dracula.min.css">
</head>
<body>
  <!-- Top Toolbar -->
  <div id="toolbar">
    <button id="newFileBtn">New File</button>
    <button id="importBtn">Import Files</button>
    <button id="exportAllBtn">Export All (ZIP)</button>
    <input type="file" id="importInput" multiple>
  </div>
  
  <!-- Main Container -->
  <div id="container">
    <!-- Left: Code Editor -->
    <div id="editorPane">
      <div id="editorHeader">
        <div id="tabs"></div>
        <div class="panel-buttons">
          <button id="maximizeLeftBtn">Maximize Editor</button>
        </div>
      </div>
      <div id="editorContainer">
        <!-- CodeMirror will replace this textarea -->
        <textarea id="codeEditor" spellcheck="false"></textarea>
      </div>
    </div>
    <div id="verticalResizer" class="resizer vertical"></div>
    <!-- Right: Processing Preview -->
    <div id="previewPane">
      <div id="previewHeader">
        <span>Processing Preview</span>
        <div class="panel-buttons">
          <button id="refreshPreviewBtn">Refresh Preview</button>
          <button id="maximizeRightBtn">Maximize Preview</button>
        </div>
      </div>
      <iframe id="previewFrame"></iframe>
    </div>
  </div>
  
  <!-- Console Panel (IDE Console) -->
  <div id="consolePanel" class="hidden">
    <div id="horizontalResizer" class="resizer horizontal"></div>
    <div id="consoleHeader">
      <span>Console Output</span>
    </div>
    <!-- The external Processing console will be injected here -->
    <div id="consoleOutput"></div>
  </div>
  
  <!-- Bottom Toolbar for Console Controls -->
  <div id="bottomToolbar">
    <button id="toggleConsoleBtn">Show Console</button>
    <button id="clearConsoleBtn">Clear Console</button>
  </div>
  
  <!-- Drop Overlay for Drag-and-Drop File Import -->
  <div id="dropOverlay" class="hidden">
    <span>Drop files here to import</span>
  </div>
  
  <!-- Rename Modal -->
  <div id="renameModal" class="modal hidden">
    <div class="modal-content">
      <h2>Rename File</h2>
      <input type="text" id="renameInput" placeholder="Enter new file name (.pde)">
      <div class="modal-actions">
        <button id="renameCancelBtn" class="modal-btn">Cancel</button>
        <button id="renameSaveBtn" class="modal-btn">Save</button>
      </div>
    </div>
  </div>
  
  <!-- Delete Confirmation Modal -->
  <div id="deleteModal" class="modal hidden">
    <div class="modal-content">
      <h2>Delete File</h2>
      <p id="deleteModalMessage">Are you sure you want to delete this file?</p>
      <div class="modal-actions">
        <button id="deleteCancelBtn" class="modal-btn">No</button>
        <button id="deleteConfirmBtn" class="modal-btn">Yes</button>
      </div>
    </div>
  </div>
  
  <!-- Create File Modal -->
  <div id="createFileModal" class="modal hidden">
    <div class="modal-content">
      <h2>Create File</h2>
      <input type="text" id="createFileInput" placeholder="Enter new file name (.pde)">
      <div class="modal-actions">
        <button id="createFileCancelBtn" class="modal-btn">Cancel</button>
        <button id="createFileConfirmBtn" class="modal-btn">Create</button>
      </div>
    </div>
  </div>
  
  <!-- Download File Modal -->
  <div id="downloadModal" class="modal hidden">
    <div class="modal-content">
      <h2>Download File</h2>
      <input type="text" id="downloadInput" placeholder="Enter file name for download">
      <div class="modal-actions">
        <button id="downloadCancelBtn" class="modal-btn">Cancel</button>
        <button id="downloadConfirmBtn" class="modal-btn">Download</button>
      </div>
    </div>
  </div>
  
  <!-- Export ZIP Modal -->
  <div id="zipModal" class="modal hidden">
    <div class="modal-content">
      <h2>Export Project</h2>
      <input type="text" id="zipInput" placeholder="Enter name for the ZIP file" value="project.zip">
      <div class="modal-actions">
        <button id="zipCancelBtn" class="modal-btn">Cancel</button>
        <button id="zipConfirmBtn" class="modal-btn">Export</button>
      </div>
    </div>
  </div>
  
  <!-- External Scripts via CDN -->
  <script src="external/jszip.min.js"></script>
  <script src="external/codemirror.min.js"></script>
  <!-- CodeMirror mode for Java (used for Processing) -->
  <script src="external/clike.min.js"></script>
  
  <!-- Main Script -->
  <script src="script.js"></script>
</body>
</html>
