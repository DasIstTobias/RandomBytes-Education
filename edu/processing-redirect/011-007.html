<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Add PDE File via Link</title>
  <script>
    document.addEventListener("DOMContentLoaded", function() {
      // Hardcoded file name and PDE code
      var fileName = "ganzesArray.pde"; // Change this to your desired file name
      var fileContent = `int[] einArray = new int[4];
einArray[0] = 175;
einArray[1] = -80;
einArray[2] = 62;
einArray[3] = 182;

print(einArray);`; // Write your PDE code here

      // Retrieve existing files and file order from localStorage
      var files = {};
      var fileOrder = [];
      if (localStorage.getItem('webIDE_files')) {
        try {
          files = JSON.parse(localStorage.getItem('webIDE_files'));
        } catch (e) {
          console.error('Error parsing webIDE_files:', e);
        }
      }
      if (localStorage.getItem('webIDE_fileOrder')) {
        try {
          fileOrder = JSON.parse(localStorage.getItem('webIDE_fileOrder'));
        } catch (e) {
          console.error('Error parsing webIDE_fileOrder:', e);
        }
      }
      
      // Add or update the file without checking for overwrite
      files[fileName] = { name: fileName, content: fileContent };
      if (fileOrder.indexOf(fileName) === -1) {
        fileOrder.push(fileName);
      }
      
      // Save updated data back to localStorage
      localStorage.setItem('webIDE_files', JSON.stringify(files));
      localStorage.setItem('webIDE_fileOrder', JSON.stringify(fileOrder));
      
      // Redirect to your Web IDE page (assumed to be index.html)
      window.location.href = "../../web-ide-processing/index.html";
    });
  </script>
</head>
<body>
  <p>Adding PDE file and redirecting to the Web IDE...</p>
</body>
</html>
